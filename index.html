<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="referrer" content="no-referrer">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <title>ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&family=Rajdhani:wght@600&display=swap');

    * { margin:0; padding:0; box-sizing:border-box; }
    body {
      background: linear-gradient(135deg, #0f0f1a, #1a0033);
      color:#fff;
      font-family:'Rajdhani', sans-serif;
      min-height:100vh;
      overflow-x:hidden;
      -webkit-overflow-scrolling: touch;
    }
    .header {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 10px 14px;
      background: rgba(10,10,30,0.85);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(0,255,255,0.3);
      gap: 12px;
      flex-wrap: wrap;
    }
    .header img {
      width: 40px;
      height: 40px;
      border-radius: 8px;
      border: 2px solid cyan;
      box-shadow: 0 0 12px rgba(0,255,255,0.6);
    }
    .title-container { text-align: center; }
    .header h1 {
      font-family: 'Orbitron', sans-serif;
      font-size: 1.5em;
      color: cyan;
      text-shadow: 0 0 12px cyan;
      letter-spacing: 2px;
      margin: 0;
    }
    .subtitle {
      font-size: 0.75em;
      color: #00ffff99;
      margin-top: 2px;
    }
    .player-wrapper {
      position: relative;
      width: 100%;
      max-width: 100%;
      aspect-ratio: 16/9;
      margin: 12px auto;
      border-radius: 12px;
      overflow: hidden;
      background: #111;
      box-shadow: 0 0 30px rgba(0,255,255,0.4);
      border: 1.5px solid rgba(0,255,255,0.5);
    }
    iframe { width: 100%; height: 100%; border: none; }
    #channel-overlay {
      position: absolute;
      bottom: 10px;
      left: 10px;
      background: rgba(0,0,0,0.75);
      padding: 6px 12px;
      border-radius: 8px;
      font-size: 12px;
      font-weight: bold;
      color: cyan;
      text-shadow: 0 0 8px cyan;
      display: none;
      z-index: 20;
      border: 1px solid rgba(0,255,255,0.4);
    }
    #search {
      display: block;
      width: 92%;
      max-width: 360px;
      margin: 12px auto 6px;
      padding: 12px;
      font-size: 16px;
      border: 2px solid cyan;
      border-radius: 50px;
      background: rgba(10,10,30,0.75);
      color: cyan;
      text-align: center;
      outline: none;
      box-shadow: 0 0 16px rgba(0,255,255,0.3);
    }
    #search:focus {
      box-shadow: 0 0 24px rgba(0,255,255,0.6);
      background: rgba(20,20,50,0.85);
    }
    .today-events {
      text-align: center;
      color: #00ffff;
      font-size: 1.25em;
      margin: 8px auto 12px;
      text-shadow: 0 0 8px cyan;
    }
    .channels {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(110px, 1fr));
      gap: 12px;
      padding: 10px;
      padding-bottom: 120px;
      max-width: 100%;
      margin: 0 auto;
    }
    .btn {
      background: linear-gradient(145deg, #1a1a2e, #0f0f1a);
      border: 1.5px solid rgba(0,255,255,0.4);
      border-radius: 14px;
      padding: 10px;
      text-align: center;
      transition: all 0.3s;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      box-shadow: 0 4px 12px rgba(0,0,0,0.6);
      position: relative;
      aspect-ratio: 1 / 1.35;
    }
    .btn:hover {
      transform: scale(1.03);
      border-color: cyan;
      box-shadow: 0 0 25px rgba(0,255,255,0.5);
    }
    .btn img {
      width: 60px;
      height: 60px;
      object-fit: contain;
      border-radius: 50%;
      border: 2.5px solid cyan;
      box-shadow: 0 0 10px rgba(0,255,255,0.5);
      margin-bottom: 6px;
    }
    .btn span {
      font-size: 10.5px;
      font-weight: bold;
      color: cyan;
      text-shadow: 0 0 6px cyan;
      line-height: 1.15;
      word-break: break-word;
    }
    .btn.live::after {
      content: '';
      position: absolute;
      top: 4px;
      right: 4px;
      width: 12px;
      height: 12px;
      background: #ff0000;
      border-radius: 50%;
      box-shadow: 0 0 10px #ff0000;
      animation: pulse 1.5s infinite;
      border: 1.5px solid #fff;
    }
    @keyframes pulse { 0%,100% {transform: scale(1);} 50% {transform: scale(1.3);} }

    .btn.selected {
      border: 3px solid #00ffff !important;
      box-shadow: 0 0 30px #00ffff80, inset 0 0 15px #00ffff40;
      background: linear-gradient(145deg, #16213e, #1a0033);
      transform: scale(1.05);
      z-index: 5;
    }

    footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(10,10,30,0.9);
      backdrop-filter: blur(10px);
      color: cyan;
      text-align: center;
      padding: 8px;
      font-size: 12px;
      z-index: 100;
      border-top: 1px solid rgba(0,255,255,0.3);
      text-shadow: 0 0 6px cyan;
    }

    @media (max-width: 600px) {
      .channels { grid-template-columns: repeat(auto-fill, minmax(90px, 1fr)); gap: 10px; padding: 8px; }
      .btn { padding: 8px; aspect-ratio: 1/1.4; }
      .btn img { width: 52px; height: 52px; margin-bottom: 5px; }
      .btn span { font-size: 9.5px; }
      .player-wrapper { margin: 10px auto; max-height: 45vh; border-radius: 10px; }
      .header { padding: 8px 12px; gap: 8px; }
      .header h1 { font-size: 1.4em; }
      .today-events { font-size: 1.15em; margin: 6px auto 10px; }
      #search { margin: 10px auto 4px; padding: 10px; font-size: 15px; width: 94%; }
    }
    @media (orientation: landscape) and (max-height: 500px) {
      .player-wrapper { max-height: 70vh; }
      .channels { padding-bottom: 80px; }
    }
  </style>
</head>
<body>

<div class="header">
  <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg" alt="Logo">
  <div class="title-container">
    <h1>ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸</h1>
    <div class="subtitle">Si No Se Reproduce, Activa Un VPN-Android & Ios</div>
  </div>
</div>

<div class="player-wrapper">
  <iframe id="player" allowfullscreen webkitallowfullscreen mozallowfullscreen playsinline webkit-playsinline allow="autoplay; encrypted-media; fullscreen"></iframe>
  <div id="channel-overlay"></div>
</div>

<input type="text" id="search" placeholder="Buscar canalâ€¦">
<div class="today-events">Cargando fecha...</div>

<div class="channels">

  <button class="btn" data-url="https://dlhd.link/embed/stream-68.php" data-time="20:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>20:00 H. â¡ï¸ BOXEO-1 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Nick Ball ğŸ†š Brandon Figueroa*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-83.php" data-time="20:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>20:00 H. â¡ï¸ BOXEO-2 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Nick Ball vs Brandon Figueroa*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-446.php" data-time="20:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>20:00 H. â¡ï¸ BOXEO-3 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Nick Ball vs Brandon Figueroa*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-927.php" data-time="20:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>20:00 H. â¡ï¸ BOXEO-4 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Nick Ball vs Brandon Figueroa*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-150.php" data-time="20:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>20:00 H. â¡ï¸ BOXEO-5 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Nick Ball vs Brandon Figueroa*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-109.php" data-time="17:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>17:00 H. â¡ï¸ GLORY KICKBOXING *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Glory Kickboxing 105 : Superfight Series*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-110.php" data-time="18:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>18:00 H. â¡ï¸ PFL *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *PFL Road to Dubai 26 : Nurmagomedov vs Davis*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-420.php" data-time="18:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>18:00 H. â¡ï¸ PFL *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *PFL Road to Dubai 26 : Nurmagomedov vs Davis*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-151.php" data-time="18:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>18:00 H. â¡ï¸ Fight Club Rush *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *Fight Club Rush 27*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-76.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-1 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-31.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-2 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-834.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-3 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-409.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-4 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-420.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-5 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-47.php" data-time="23:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>23:00 H. â¡ï¸ UFC-6 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Prelims : Alex Morono ğŸ†š Daniil Donchenko*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-76.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-7 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-31.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-8 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-834.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-9 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveirao*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-409.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-10 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-119.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-11 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-49.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-12 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-123.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-13 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-47.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-14 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-420.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-15 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-628.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-16 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

  <button class="btn" data-url="https://dlhd.link/embed/stream-473.php" data-time="02:00">
    <img src="https://i.postimg.cc/HWNY09cy/IMG_20250719_105732.jpg">
    <span>02:00 H. â¡ï¸ UFC-17 *ğŸ…±ï¸ğŸ…¾ï¸ğŸ†‡ï¸ğŸ…´ï¸ğŸ…¾ï¸ & ğŸ…¼ï¸ğŸ…°ï¸ğŸ†‚ï¸ 2ğŸ…¾ï¸26Â®ï¸ *UFC Fight Night Main Card : Mario Bautista ğŸ†š Vinicius Oliveira*</span>
  </button>

</div>

<footer>@By Tintxi-Â©2026</footer>

<script>
// Zona horaria EspaÃ±a
function getCurrentSpainTime() {
  return new Date(new Date().toLocaleString('en-US', { timeZone: 'Europe/Madrid' }));
}

function parseEventTime(timeStr) {
  const match = timeStr.match(/(\d{2}):(\d{2})/);
  if (!match) return null;
  return {
    hours: parseInt(match[1], 10),
    minutes: parseInt(match[2], 10)
  };
}

function getEventDateTime(now, eventHour, eventMinute) {
  let eventDate = new Date(now);
  eventDate.setHours(eventHour, eventMinute, 0, 0);
  eventDate.setSeconds(0, 0);

  const graceHours = 4;

  if (eventHour >=20) {
    if (now.getHours() < graceHours) {
      eventDate.setDate(eventDate.getDate() -1);
    }
  }
  if (eventHour <=3) {
    if (now.getHours() >=20) {
      eventDate.setDate(eventDate.getDate() +1);
    } else if (now.getHours() >= graceHours) {
      eventDate.setDate(eventDate.getDate() -1);
    }
  }

  return eventDate;
}

function isEventActiveOrPassed(now, eventHour, eventMinute) {
  const eventDT = getEventDateTime(now, eventHour, eventMinute);
  return eventDT <= now;
}

function playChannel(btn) {
  const player = document.getElementById('player');
  const overlay = document.getElementById('channel-overlay');

  document.querySelectorAll('.btn').forEach(b => b.classList.remove('selected'));
  btn.classList.add('selected');

  const url = btn.dataset.url;
  const timeStr = btn.dataset.time;
  const name = btn.querySelector('span').innerText.trim();

  const eventTime = parseEventTime(timeStr);
  if (!eventTime) return;

  player.src = '';
  player.removeAttribute('src');
  player.removeAttribute('srcdoc');
  try {
    player.contentWindow?.stop();
    player.contentWindow?.location.replace('about:blank');
  } catch (e) {}

  setTimeout(() => {
    const now = getCurrentSpainTime();

    if (isEventActiveOrPassed(now, eventTime.hours, eventTime.minutes)) {
      player.src = url;
      overlay.textContent = 'EstÃ¡s Viendo: ' + name;
      overlay.style.display = 'block';
      setTimeout(() => { overlay.style.display = 'none'; }, 15000);
    } else {
      player.srcdoc = `
        <html>
          <body style="margin:0;background:#000;color:#fff;height:100vh;display:flex;align-items:center;justify-content:center;font-family:sans-serif;text-align:center;padding:20px;">
            <div>
              <h2 style="color:#ff4444;font-size:2.4em;margin-bottom:20px;">EL EVENTO EMPEZARÃ A SU HORA</h2>
              <p style="font-size:2.2em;color:#00ffff;">${timeStr} H.</p>
            </div>
          </body>
        </html>`;
    }

    document.querySelector('.player-wrapper').scrollIntoView({behavior: 'smooth'});
  }, 200);
}

window.addEventListener('load', () => {
  const today = getCurrentSpainTime();
  const dd = String(today.getDate()).padStart(2, '0');
  const mm = String(today.getMonth() + 1).padStart(2, '0');
  const yy = String(today.getFullYear()).slice(-2);
  document.querySelector('.today-events').textContent = `Eventos de hoy, ${dd}/${mm}/${yy}`;

  let firstActive = null;
  document.querySelectorAll('.btn').forEach(btn => {
    const timeStr = btn.dataset.time;
    if (timeStr) {
      const eventTime = parseEventTime(timeStr);
      if (eventTime) {
        const now = getCurrentSpainTime();
        if (isEventActiveOrPassed(now, eventTime.hours, eventTime.minutes)) {
          btn.classList.add('live');
          if (!firstActive) firstActive = btn;
        }
      }
    }
    btn.addEventListener('click', () => playChannel(btn));
  });

  if (firstActive) {
    setTimeout(() => firstActive.click(), 1200);
  }
});

document.getElementById('search').addEventListener('keyup', function() {
  let filter = this.value.toLowerCase();
  document.querySelectorAll('.btn').forEach(btn => {
    let text = btn.querySelector('span').innerText.toLowerCase();
    btn.style.display = text.includes(filter) ? 'flex' : 'none';
  });
});
</script>

</body>
</html>
